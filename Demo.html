<!DOCTYPE html>
<html>
    <head>
        <title>Page Title</title>
        meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title></title>
        <style>
            body {
    
}


    


audio
{
width:35vw;
-moz-box-shadow: 2px 2px 4px 0px #006773;
-webkit-box-shadow:  2px 2px 4px 0px #fff;
box-shadow: 2px 2px 4px 0px #fff;
-moz-border-radius:7px 7px 7px 7px ;
-webkit-border-radius:7px 7px 7px 7px ;
border-radius:7px 7px 7px 7px ;

}

audio::-webkit-media-controls-panel{
    background-color:#fff;
    padding:4%;
}

 audio::-webkit-media-controls-mute-button{
    background-color:white;
    border-radius:25%;
    display:none;
}
 audio::-webkit-media-controls-play-button{
    background-color:white;
    font-size:160%;
    
} audio::-webkit-media-controls-timeline-container{
    background-color:red;
    display:none;
}
 audio::-webkit-media-controls-current-time-display {
     background-color:white;
     border-radius:25%;
     padding:0.5%;
 }
 audio::-webkit-media-controls-time-remaining-display {
     background-color:white;
     border-radius:25%;
     padding:0.5%;
     display:none;
 }
 
 audio::-webkit-media-controls-timeline{
     display:none;
 } 
 audio::-webkit-media-controls-volume-slider-container{
     background-color:red;
 } 
 audio::-webkit-media-controls-volume-slider{
     display:none;
 } 
 audio::-webkit-media-controls-seek-back-button{
     display:none;
 }
  audio::-webkit-media-controls-seek-forward-button{
      display:none;
  }
   audio::-webkit-media-controls-fullscreen-button{
   display:none;
       
   }
    audio::-webkit-media-controls-rewind-button{
        display:none;
    } 
    
audio::-webkit-media-controls-enclosure { border-radius: 5px; 

 }

audio::-webkit-media-controls-toggle-closed-captions-button { display: none;}

audio::-webkit-media-controls-enclosure { overflow:hidden; }

.iframevid{
    width:100%;
    height:auto;
    border:none;
    margin-bottom:0.4vh;
    height:60vh;
}
        </style>
        <script>
            console.error = function() {
    
}
window.onload=function(){
var top=document.createElement("top");
    top.classList.add("top");
    top.style.top=0;
    top.style.left=0;
    top.style.textAlign="center";
    top.style.justifyContent="center";
    top.style.alignItems="center";
    top.style.paddingTop="3vh";
    top.style.zIndex=99999;
    top.style.backgroundColor="#38729d";
    top.style.color="white";
    top.style.paddingBottom="3vh";
    top.style.position="fixed";
    top.style.width="100%"
    top.innerHTML ="Youtube To Mp3"
var input=document.createElement("input");
input.style.width="90vw";
input.style.margin="1%";
input.style.padding="2%";
input.style.marginTop="10vh";
input.placeholder="Enter Youtube Video Link"; input.value="https://youtu.be/KOYhMV18t5s"
var ctbtn=document.createElement("button");
var a_div=document.createElement("div");
var b_div=document.createElement("div");
document.body.appendChild(top);
document.body.appendChild(input);
document.body.appendChild(ctbtn);
document.body.appendChild(a_div);
document.body.appendChild(b_div);
var btn= document.getElementsByTagName("button")[0];
btn.classList.add("view_btn");
btn.style.marginBottom="6vh";
btn.innerText ="View"
var dl=btn;
    dl.style.width="98%";
    dl.style.color="white";
    dl.style.padding="2%";
    dl.style.backgroundColor="#38729d";
    dl.style.border="none";
    dl.style.margin="1%";
btn.addEventListener("click",check_youtube_url)
var ft= document.createElement("footer");
    ft.innerHTML="&copy Furqan_Elahie  [Imaziue Coders]";
    ft.style.bottom=0;
    ft.style.left=0;
    ft.style.textAlign="center";
    ft.style.justifyContent="center";
    ft.style.alignItems="center";
    ft.style.paddingTop="1.5vh";
   // ft.style.marginTop="10vh";
    ft.style.backgroundColor="#38729d";
    ft.style.color="white";
    ft.style.paddingBottom="1.5vh";
    ft.style.position="fixed";
    ft.style.width="100%"
    document.body.appendChild(ft)

}
function YtDownload(){

if(document.getElementById("abaudio")===null){
        
    }else{
    var aues=document.getElementById("abaudio");
    if(aues.playing===true){
        aues.pause()
    }
        document.body.removeChild(aues)
    }
var btn= document.getElementsByTagName("button")[0];
btn.innerText="Loading..."
progresstxt()
const result=document.getElementsByTagName("div")[0];
result.innerHTML=""
result.style.display="none"
var input=document.getElementsByTagName("input")[0];
var url="https://www.yt-download.org/api/button/mp3/"+tag();
Promise.all([ fetch(url).then(x => x.text())]).then(([sampleResp]) => { 
var css=sampleResp;


var htmlString = sampleResp,
 html = document.createElement('html'),
  frag = document.createDocumentFragment();
   html.innerHTML = htmlString;
    frag.appendChild(html);
     var high = frag.firstChild.getElementsByTagName('a')[0].getAttribute("href");
     var highsize= frag.firstChild.getElementsByTagName('a')[0].getElementsByTagName("*")[3].innerHTML;
     
     var second = frag.firstChild.getElementsByTagName('a')[1].getAttribute("href");
     var secondsize= frag.firstChild.getElementsByTagName('a')[1].getElementsByTagName("*")[3].innerHTML;
     
     
     var third = frag.firstChild.getElementsByTagName('a')[2].getAttribute("href");
     var thirdsize= frag.firstChild.getElementsByTagName('a')[2].getElementsByTagName("*")[3].innerHTML;
     
     var forth = frag.firstChild.getElementsByTagName('a')[3].getAttribute("href");
     var forthsize= frag.firstChild.getElementsByTagName('a')[3].getElementsByTagName("*")[3].innerHTML;
     demoSuccess();
     var url2="https://www.yt-download.org/api/button/videos/"+tag();
Promise.all([ fetch(url2).then(x => x.text())]).then(([sampleResp]) => { 
var css=sampleResp;


var htmlString = sampleResp,
 html = document.createElement('html'),
  frag = document.createDocumentFragment();
   html.innerHTML = htmlString;
    frag.appendChild(html);
     var highmp4 = frag.firstChild.getElementsByTagName('a')[0].getAttribute("href");
    var highsizemp4= frag.firstChild.getElementsByTagName('a')[0].getElementsByTagName("*")[3].innerHTML;
     var imgsrcurl="https://img.youtube.com/vi/"+tag()+"/default.jpg";
     Videomp4(highmp4,imgsrcurl,highsizemp4);

}).catch(function(error){
if(error.message=="Failed to execute 'fetch' on 'Window': Failed to parse URL from "){
alert(error.message)
    demoError_2();
}else{
    demoError();
}
})

      AudioMake(high,highsize);
      AudioMake(second,secondsize);
      AudioMake(third,thirdsize);
      AudioMake(forth,forthsize);

}).catch(function(error){
if(error.message=="Failed to execute 'fetch' on 'Window': Failed to parse URL from "){

    demoError_2();
}else{
    demoError();
}
})
}

function tag(){
    var url = document.getElementsByTagName("input")[0].value;
    if(url.startsWith("http://")){
        let len = url.length - 1;
        let tmp = url.substr(7,len);
        url = tmp;
    }
    else if(url.startsWith("https://")){
        let len = url.length -1;
        let tmp = url.substr(8,len);
        url = tmp;
    }
    else{
        demoError();
        url = "";
    };
  
    if(url.startsWith("youtu.be/")){
            let leng = url.length - 1;
            let temp = url.substr(9,leng);
            url = temp;
        }
    else if(url.startsWith("youtube.com/watch?v=")){
            let leng = url.length - 1;
            let temp = url.substr(20,leng);
            url = temp;
        }
    else if(url.startsWith("m.youtube.com/watch?v=")){
            let leng = url.length - 1;
            let temp = url.substr(22,leng);
            url = temp;
        }
    else if(url.startsWith("www.youtube.com/watch?v=")){
            let leng = url.length - 1;
            let temp = url.substr(24,leng);
            url = temp;
        }
        else {
           demoError()
           url = "";
        }
  return url;
};

function check_youtube_url(){
    if(tag().length===11){
        YtDownload()
    }else{
        demoError()
    }
}

function AudioMake(a,b){
const result=document.getElementsByTagName("div")[0];    
var div= document.createElement("div");
    div.classList.add("audio_div");
    div.style.textAlign="center";
    div.style.justifyContent="center";
    div.style.alignItems="center";
    div.style.border="3px solid #38729d";
    div.style.width="100%";
    div.style.marginBottom="8vh";
var audio=document.createElement("audio");
    audio.controls=true;
    audio.preload="none";
    audio.src=a;
    audio.disablepictureinpicture=true;
    audio.controlslist="nodownload";
var flex=document.createElement("div");
    flex.style.display="flex";
    flex.style.textAlign="center";
    flex.style.justifyContent="center";
    flex.style.alignItems="center";
var img=document.createElement("img");
    img.style.borderRadius="10px"
    img.style.width="80px";
    img.style.height="80px";
var imgsrc="https://img.youtube.com/vi/"+tag()+"/default.jpg";
    img.src=imgsrc;
var span=document.createElement("p");
    span.classList.add("audio_span");
    span.innerText=b;
    span.style.color="#38729d";
var dl=document.createElement("button");
    dl.style.width="98%";
    dl.style.color="white";
    dl.style.padding="2%";
    dl.style.backgroundColor="#38729d";
    dl.style.border="none";
    dl.style.margin="1%";
    dl.innerText ="Download"
    dl.onclick=function(){
        window.location.href=a;
    }
    
    div.appendChild(span);
    flex.appendChild(img);
    flex.appendChild(audio);
    div.appendChild(flex);
    div.appendChild(dl)
    
    result.appendChild(div);
    audiosShow()
}
function audiosShow(){
setTimeout(int_,3000)
}
function int_(){
    const result=document.getElementsByTagName("div")[0];
    result.style.display="block"
    orgtxt()
}
function orgtxt(){

var btn= document.getElementsByTagName("button")[0];
btn.innerText="View"
}
function progresstxt(){
    var btn= document.getElementsByTagName("button")[0];
btn.innerText="Loading...(3)"
setTimeout(function(){
    btn.innerText="Loading...(2)"
},1000)
setTimeout(function(){
    btn.innerText="Loading...(1)"
},2000)
setTimeout(function(){
    btn.innerText="Loading...(wait)"
},3000)
}
var demoError = function () {
         let demoErrElem = SnackBar({ 
         message: "Invalid Input Response",
          status: "danger",
          timeout:2000,
          }) 
          }
var demoError_2 = function () {
         let demoErrElem = SnackBar({ 
         message: "Server Error,Try again",
          status: "danger",
          timeout:2000,
          }) 
          }
var demoSuccess = function () {
         let demoErrElem = SnackBar({ 
         message: "Request Completed,wait",
          status: "success",
          timeout:2000,
          }) 
          }
 function hidea(){
 
 var audios=document.querySelectorAll("audio");
 for(z=0;z<audios.length;z++){
     audios[z].setAttribute("controlslist","nodownload")
 }
 }
 setInterval(hidea,1000)
 function Videomp4(a,b,c){
     alert(a)
     alert(b)
     if((document.getElementsByTagName("iframe")[0]||null===null)){
         
     }else{
         document.getElementsByTagName("iframe")[0].outerHTML=``
         alert(document.getElementsByTagName("iframe")[0].outerHTML)
     }
     var mp4div=document.createElement("div");
     var btn=document.createElement("button");
     btn.innerHTML ="Download Mp4 " +c;
     var dl=btn;
     dl.style.width="98%";
    dl.style.color="white";
    dl.style.padding="2%";
    dl.style.backgroundColor="#38729d";
    dl.style.border="none";
    dl.style.margin="1%";
   
     btn.onclick=function(){
         window.location.href=a;
     }
 
     var iframe=document.createElement('iframe');
     iframe.src="https://youtube2mp3.netlify.app/videoplayer.html?video="+a+"&img="+b+"&size="+c;
     
     iframe.classList.add("iframevid");
     iframe.scrolling="no";
   resulto=document.getElementsByTagName("div")[0];
   mp4div.appendChild(iframe);
   mp4div.appendChild(btn);
  mp4div.innerHTML +="<br>"
     resulto.prepend(mp4div)
 }

        </script>
        <link rel="stylesheet" href="https://www.cssscript.com/demo/snackbar-toast-notification/css/js-snackbar.css?v=1.0.0"> 
<script src="https://www.cssscript.com/demo/snackbar-toast-notification/js/js-snackbar.js?v=1.0.0"></script>
    </head>
    <body>
    </body>
</html>
